<div class="layout-sidebar" dir="rtl" [@slideIn]>
  <!-- Header / Logo Area -->
  <div class="sidebar-header">
    <div class="header-content">
      <div class="logo-box">
        <i class="pi pi-bolt"></i>
      </div>
      <h2 class="app-title">الصيدلية الذكية</h2>
      <span class="app-subtitle">نظام الإدارة الطبي المتكامل</span>
    </div>
  </div>

  <!-- Navigation Menu -->
  <div class="sidebar-content custom-scrollbar">
    <!-- Dashboard -->
    <div class="menu-group">
      <div class="menu-items">
        <a routerLink="/dashboard" routerLinkActive="active-route" [routerLinkActiveOptions]="{ exact: true }"
          class="menu-item">
          <div class="item-icon icon-dashboard">
            <i class="pi pi-chart-pie"></i>
          </div>
          <span class="item-label">لوحة التحكم</span>
          <div class="item-glow"></div>
        </a>
      </div>
      </div>

    <div class="menu-separator"></div>

    <!-- Inventory Group -->
    <div class="menu-group">
      <div class="group-title">
        <i class="pi pi-box"></i>
        <span>المخزون والمنتجات</span>
      </div>
      <div class="menu-items">
        <a routerLink="/inventory/medicines" routerLinkActive="active-route" class="menu-item">
          <div class="item-icon icon-inventory">
            <i class="pi pi-box"></i>
          </div>
          <span class="item-label">الأدوية والمنتجات</span>
          <div class="item-glow"></div>
          </a>
        <a routerLink="/inventory/categories" routerLinkActive="active-route" class="menu-item">
          <div class="item-icon icon-categories">
            <i class="pi pi-tags"></i>
          </div>
          <span class="item-label">التصنيفات</span>
          <div class="item-glow"></div>
          </a>
        <a routerLink="/inventory/movements" routerLinkActive="active-route" class="menu-item">
          <div class="item-icon icon-movements">
            <i class="pi pi-history"></i>
          </div>
          <span class="item-label">حركات المخزون</span>
          <div class="item-glow"></div>
          </a>
        <a routerLink="/inventory/batches" routerLinkActive="active-route" class="menu-item">
          <div class="item-icon icon-batches">
            <i class="pi pi-list"></i>
          </div>
          <span class="item-label">الدفعات</span>
          <div class="item-glow"></div>
        </a>
        </div>
    </div>

    <!-- Sales Group -->
    <div class="menu-group">
      <div class="group-title">
        <i class="pi pi-shopping-cart"></i>
        <span>المبيعات</span>
      </div>
      <div class="menu-items">
        <a routerLink="/sales" routerLinkActive="active-route" [routerLinkActiveOptions]="{ exact: true }" class="menu-item">
          <div class="item-icon icon-sales">
            <i class="pi pi-shopping-cart"></i>
          </div>
          <span class="item-label">فواتير المبيعات</span>
          <div class="item-glow"></div>
          </a>
        <a routerLink="/sales/returns" routerLinkActive="active-route" class="menu-item">
          <div class="item-icon icon-returns">
            <i class="pi pi-replay"></i>
          </div>
          <span class="item-label">مرتجع المبيعات</span>
          <div class="item-glow"></div>
          </a>
          </div>
    </div>

    <!-- Purchases Group -->
    <div class="menu-group">
      <div class="group-title">
        <i class="pi pi-truck"></i>
        <span>المشتريات</span>
      </div>
      <div class="menu-items">
        <a routerLink="/purchases" routerLinkActive="active-route" class="menu-item">
          <div class="item-icon icon-purchases">
            <i class="pi pi-truck"></i>
          </div>
          <span class="item-label">فواتير الشراء</span>
          <div class="item-glow"></div>
          </a>
          <a routerLink="/purchases/returns" routerLinkActive="active-route" class="menu-item">
            <div class="item-icon icon-purchase-returns">
              <i class="pi pi-refresh"></i>
            </div>
            <span class="item-label">مرتجع المشتريات</span>
            <div class="item-glow"></div>
            </a>
            </div>
          </div>
          <!-- Partners Group -->
          <div class="menu-group">
            <div class="group-title">
              <i class="pi pi-users"></i>
              <span>الشركاء</span>
            </div>
            <div class="menu-items">
              <a routerLink="/partners" routerLinkActive="active-route" [routerLinkActiveOptions]="{ exact: true }"
                class="menu-item">
                <div class="item-icon icon-partners">
                  <i class="pi pi-users"></i>
                </div>
                <span class="item-label">الموردين</span>
                <div class="item-glow"></div>
                </a>
              <a routerLink="/customers" routerLinkActive="active-route" class="menu-item">
                <div class="item-icon icon-customers">
                  <i class="pi pi-user-plus"></i>
                </div>
                <span class="item-label">العملاء</span>
                <div class="item-glow"></div>
                </a>
      </div>
    </div>
    
    <!-- Financial Group -->
    <div class="menu-group">
      <div class="group-title">
        <i class="pi pi-wallet"></i>
        <span>المالية</span>
      </div>
      <div class="menu-items">
        <a routerLink="/financial/dashboard" routerLinkActive="active-route" class="menu-item">
          <div class="item-icon icon-financial">
            <i class="pi pi-wallet"></i>
          </div>
          <span class="item-label">الخزينة والأرصدة</span>
          <div class="item-glow"></div>
        </a>
          <a routerLink="/financial/ledger" routerLinkActive="active-route" class="menu-item">
            <div class="item-icon icon-ledger">
              <i class="pi pi-book"></i>
            </div>
            <span class="item-label">دفتر الأستاذ</span>
            <div class="item-glow"></div>
            </a>
            
            <!-- Expenses Submenu -->
            <div class="submenu-wrapper">
              <a (click)="toggleExpenseMenu()" class="menu-item submenu-trigger"
                [class.active]="expenseMenuOpen || currentRoute.includes('/finance/expense')">
                <div class="item-icon icon-expenses">
                  <i class="pi pi-money-bill"></i>
              </div>
              <span class="item-label">المصروفات</span>
              <i class="pi submenu-arrow" [class.pi-chevron-down]="!expenseMenuOpen" [class.pi-chevron-up]="expenseMenuOpen"></i>
              <div class="item-glow"></div>
              </a>
            
            <div class="submenu-items" [class.open]="expenseMenuOpen">
              <a routerLink="/finance/expenses" routerLinkActive="active-route" [routerLinkActiveOptions]="{ exact: true }"
                class="submenu-item">
                <i class="pi pi-list"></i>
                <span>قائمة المصروفات</span>
              </a>
              <a routerLink="/finance/expenses/add" routerLinkActive="active-route" class="submenu-item">
                <i class="pi pi-plus-circle"></i>
                <span>إضافة مصروف</span>
              </a>
              <a routerLink="/finance/expense-categories" routerLinkActive="active-route" class="submenu-item">
                <i class="pi pi-tag"></i>
                <span>فئات المصروفات</span>
              </a>
            </div>
            </div>
            </div>
            </div>
    <!-- Admin Group -->
    <div class="menu-group">
      <div class="group-title">
        <i class="pi pi-cog"></i>
        <span>الإدارة</span>
        </div>
        <div class="menu-items">
          <a routerLink="/users" routerLinkActive="active-route" class="menu-item">
            <div class="item-icon icon-users">
              <i class="pi pi-id-card"></i>
            </div>
            <span class="item-label">المستخدمين والصلاحيات</span>
            <div class="item-glow"></div>
          </a>
          <a routerLink="/system-alerts" routerLinkActive="active-route" class="menu-item alerts-menu-item">
            <div class="item-icon icon-alerts">
              <i class="pi pi-bell"></i>
            </div>
            <span class="item-label">التنبيهات</span>
            <span class="alert-pill" *ngIf="unreadAlertsCount > 0">{{ unreadAlertsCount }}</span>
            <div class="item-glow"></div>
          </a>
        </div>
        </div>
        </div>

  <!-- Footer -->
  <div class="sidebar-footer">
    <div class="footer-stats">
      <div class="stat-item">
        <i class="pi pi-clock"></i>
        <span>{{ 'الآن' }}</span>
      </div>
    </div>
  </div>
  </div>

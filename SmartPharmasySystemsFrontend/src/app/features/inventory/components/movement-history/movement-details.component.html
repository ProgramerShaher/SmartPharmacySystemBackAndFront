<div class="movement-details" dir="rtl" *ngIf="movement">
    <div class="details-section">
        <h3 class="section-title">بيانات الدواء</h3>
        <div class="detail-grid">
            <div class="detail-item">
                <label>الدواء:</label>
                <span>{{ movement.medicine?.name }}</span>
            </div>
            <div class="detail-item">
                <label>رقم التشغيلة:</label>
                <span>{{ movement.batch?.companyBatchNumber }}</span>
            </div>
            <div class="detail-item" *ngIf="movement.batch?.expiryDate">
                <label>تاريخ الانتهاء:</label>
                <span [class.text-danger]="isExpired(movement.batch?.expiryDate)">
                    {{ movement.batch?.expiryDate | date:'MM/yyyy' }}
                </span>
            </div>
        </div>
    </div>

    <div class="details-section">
        <h3 class="section-title">تفاصيل الحركة</h3>
        <div class="detail-grid">
            <div class="detail-item">
                <label>النوع:</label>
                <p-tag [value]="getMovementTypeLabel(movement.movementType)"
                    [severity]="getMovementTypeSeverity(movement.movementType)"></p-tag>
            </div>
            <div class="detail-item">
                <label>الكمية:</label>
                <span class="qty" [ngClass]="movement.movementType === 'IN' ? 'text-success' : 'text-danger'">
                    {{ movement.movementType === 'IN' ? '+' : '-' }}{{ movement.quantity }}
                </span>
            </div>
            <div class="detail-item">
                <label>التاريخ:</label>
                <span>{{ movement.date | date:'dd/MM/yyyy HH:mm' }}</span>
            </div>
            <div class="detail-item">
                <label>المرجع:</label>
                <span>{{ movement.referenceNumber || '---' }}</span>
            </div>
        </div>
    </div>

    <div class="details-section" *ngIf="movement.notes">
        <h3 class="section-title">ملاحظات</h3>
        <p class="notes-text">{{ movement.notes }}</p>
    </div>

    <div class="details-section info-footer">
        <div class="detail-item">
            <label>بواسطة:</label>
            <span>مستخدم رقم #{{ movement.createdBy }}</span>
        </div>
    </div>

    <div class="flex justify-content-center mt-4">
        <p-button label="إغلاق" icon="pi pi-times" severity="secondary" (onClick)="onClose()"></p-button>
    </div>
</div>